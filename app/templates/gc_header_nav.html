<hr class="m-0 md:hidden bg-blue" style="height: 4px"/>
<nav class="py-5 md:hidden" aria-label="{{ _('main navigation') }}">
  <div class="container px-10">
    <!-- Mobile menu and nav bar -->
    <div class="grid grid-cols-2">
      <div>
        <a href="#" id="menu"
           class="px-2 text-small text-blue visited:text-blue link:text-blue mr-5 font-bold no-underline hover:underline"
        >{{ _('Menu') }}<img
          class="mobile-arrow ml-2 inline"
          src="data:image/svg+xml,%3C?xml version='1.0' encoding='utf-8'?%3E %3C!-- Generator: Adobe Illustrator 16.0.0, SVG Export Plug-In . SVG Version: 6.00 Build 0) --%3E %3C!DOCTYPE svg PUBLIC '-//W3C//DTD SVG 1.1//EN' 'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3E %3Csvg version='1.1' id='Capa_1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' width='960px' height='560px' viewBox='0 0 960 560' enable-background='new 0 0 960 560' xml:space='preserve'%3E %3Cg id='Rounded_Rectangle_33_copy_4_1_'%3E %3Cpath d='M480,344.181L268.869,131.889c-15.756-15.859-41.3-15.859-57.054,0c-15.754,15.857-15.754,41.57,0,57.431l237.632,238.937 c8.395,8.451,19.562,12.254,30.553,11.698c10.993,0.556,22.159-3.247,30.555-11.698l237.631-238.937 c15.756-15.86,15.756-41.571,0-57.431s-41.299-15.859-57.051,0L480,344.181z'/%3E %3C/g%3E %3C/svg%3E"
          width="20"
        />
        </a>
      </div>
      <div aria-label="{{ _('language and sign-in') }}" class="flex justify-end">
        {% if current_user.is_authenticated %}
          {% include 'account_menu.html' %}
        {% else %}
          <a
            href="{{ url_for('main.sign_in' ) }}"
            class="line-under leading-none inline-block text-blue visited:text-blue link:text-blue text-small underline hover:no-underline"
          >{{ _('Sign in') }}
          </a>
        {% endif %}
        <div>
          <a
            class="line-under leading-none inline text-blue visited:text-blue link:text-blue text-small pl-5 underline hover:no-underline"
            href="{{ url_for('main.set_lang') }}?from={{ request.path }}">
            {% if session["userlang"] == "en" %}FR{% else %}EN{% endif %}
          </a>
        </div>
      </div>
      <!-- Mobile menu and nav bar END -->
      <!-- MD-LG menu and nav bar -->
    </div>
  </div>
</nav>
{% if withnav %}
  <nav class="bg-gray xs:hidden smaller:hidden sm:hidden md:flex" aria-label="{{ _('main navigation') }}">
    <div class="container px-10">
      <div id="proposition-links" class="flex flex-no-wrap">
        {% if not current_user.is_authenticated %}
          <div class="flex-shrink-0 self-center text-center p-5">
            <a href="/"
               class="text-smaller text-blue visited:text-blue link:text-blue font-bold no-underline hover:underline"
            >{{ _('Home') }}</a>
          </div>
          <div
            class="flex-shrink-0 self-center text-center p-5 header--{{ header_navigation.is_selected('why-notify') }}">
            <a href="{{ url_for('main.why-notify') }}"
               class="text-smaller text-blue visited:text-blue link:text-blue font-bold no-underline hover:underline"
            >{{ _('Why GC Notify') }}</a>
          </div>
          <div
            class="flex-shrink-0 self-center text-center p-5 header--{{ header_navigation.is_selected('features') }}">
            <a href="{{ url_for('main.features') }}"
               class="text-smaller text-blue visited:text-blue link:text-blue font-bold no-underline hover:underline"
            >{{ _('Features') }}</a>
          </div>
          <div
            class="flex-shrink-0 self-center text-center p-5 header--{{ header_navigation.is_selected('documentation') }}">
            <a
              href="{{ url_for('main.documentation') }}"
              class="text-small text-blue visited:text-blue link:text-blue mr-10 font-bold no-underline hover:underline"
            >{{ _('Documentation') }}</a>
          </div>
          <div class="flex-shrink-0 self-center text-center p-5 header--{{ header_navigation.is_selected('contact') }}">
            <a
              href="{{ url_for('main.contact') }}"
              class="text-smaller text-blue visited:text-blue link:text-blue font-bold no-underline hover:underline"
            >{{ _('Contact us') }}
            </a>
          </div>

        {% endif %}
        {% if current_user.is_authenticated %}
          {% if current_user.platform_admin %}
            <div
              class="flex-shrink-0 self-center text-center p-5 header--{{ header_navigation.is_selected('platform-admin') }}">
              <a href="{{ url_for('main.live_services') }}"
                 class="text-smaller text-blue visited:text-blue link:text-blue font-bold no-underline hover:underline"
              >{{ _('Platform admin') }}</a>
            </div>
          {% endif %}
          {% if current_service.name %}
            {% if current_user.has_permissions('view_activity') %}
              <div
                class="flex-shrink-0 self-center text-center p-5 header--{{ header_navigation.is_selected('dashboard') }}">
                <a href="{{ url_for('.service_dashboard', service_id=current_service.id) }}"
                   class="text-smaller text-blue visited:text-blue link:text-blue font-bold no-underline hover:underline"
                >{{ _('Dashboard') }}</a>
              </div>
            {% endif %}

            {% if current_user.has_permissions() %}
              <div
                class="flex-shrink-0 self-center text-center p-5 header--{{ header_navigation.is_selected('templates') }}">
                <a href="{{ url_for('.choose_template', service_id=current_service.id) }}"
                   class="text-smaller text-blue visited:text-blue link:text-blue font-bold no-underline hover:underline"
                >{{ _('Templates') }}</a>
              </div>
            {% endif %}
            {% if current_user.has_permissions('manage_api_keys') %}
              <div
                class="flex-shrink-0 self-center text-center p-5 header--{{ header_navigation.is_selected('api-integration') }}">
                <a href="{{ url_for('.api_integration', service_id=current_service.id) }}"
                   class="text-smaller text-blue visited:text-blue link:text-blue font-bold no-underline hover:underline"
                >{{ _('API integration') }}</a>
              </div>
            {% endif %}
            <div
              class="flex-shrink-0 self-center text-center p-5 header--{{ header_navigation.is_selected('team-members') }}">
              <a href="{{ url_for('.manage_users', service_id=current_service.id) }}"
                 class="text-smaller text-blue visited:text-blue link:text-blue font-bold no-underline hover:underline"
              >{{ _('Team members') }}</a>
            </div>
            {% if current_user.has_permissions('manage_api_keys', 'manage_service') %}
              <div
                class="flex-shrink-0 self-center text-center p-5 header--{{ header_navigation.is_selected('settings') }}">
                <a href="{{ url_for('.service_settings', service_id=current_service.id) }}"
                   class="text-smaller text-blue visited:text-blue link:text-blue font-bold no-underline hover:underline"
                >{{ _('Settings') }}</a>
              </div>
            {% endif %}
          {% endif %}
        {% endif %}
      </div>
      <!-- MD-LG menu and nav bar END -->
    </div>
  </nav>
{% else %}
  <hr class="m-0 xs:hidden smaller:hidden sm:hidden md:flex"/>
{% endif %}
<script>
  function classToggle() {
    const nav = document.querySelector(".mobile-nav")
    const arrow = document.querySelector(".mobile-arrow")
    nav.classList.toggle("hidden")
    arrow.classList.toggle("flip")
  }

  document.querySelector("#menu").addEventListener("click", classToggle)
</script>
