{% extends "admin_template.html" %}
{% from "components/table.html" import list_table, field, hidden_field_heading %}
{% from "components/message-count-label.html" import message_count_label %}
{% from "components/empty-list.html" import empty_list  %}
{% from "components/table.html" import list_table, field, text_field, link_field, right_aligned_field_heading, hidden_field_heading, row_heading, notification_status_field %}

{% block service_page_title %}
  {{ _('Dowload reports') }}
{% endblock %}

{% block maincolumn_content %}

  <h1 class="heading-medium mb-12 clear-both contain-floats">
    {{ _('Dowload reports') }}
  </h1>

  <div class="mb-12">
    <p>
      {{ _("Reports expire and are deleted 72 hours after being generated.") }}
    </p>
  </div>
  {% set empty_txt = empty_list(_('You havenâ€™t generated reports recently'), _('Check sent notifications or jobs to get started.'), 'emptyFlower', url_for('main.service_dashboard', service_id=current_service.id), _('Go to dashboard')) %}
  {% set heading_1 = _('Report') %}
  {% set heading_2 = _('Available') %}


  {% if reports %}
  <div class='dashboard-table'>
{% endif %}
  
  {% call(item, row_number) list_table(
    reports,
    caption="Recent activity",
    caption_visible=False,
    empty_message=empty_txt,
    field_headings=[heading_1,heading_2],
    field_headings_visible=False if not reports else True
  ) %}
    {% call row_heading() %}
        <a class="file-list-filename" href="{{ item.url }}">{{ item.requested_at }} - {{ item.report_type}} - {{ current_service.name }} report</a>
      <p class="file-list-hint">
        Requested by {{ item.requested_by }}
      </p>
    {% endcall %}
    
    {{ text_field(item.status) }}

  {% endcall %}
{% if reports %}
  </div>
{% endif %}

{% endblock %}
