{% extends "admin_template.html" %}
{% from "components/form.html" import form_wrapper %}
{% from "components/page-header.html" import page_header %}
{% from "components/empty-list.html" import empty_list  %}
{% from "components/table.html" import list_table, field, right_aligned_field_heading, row_heading %}
{% from "components/ajax-block.html" import ajax_block %}

{% block service_page_title %}
  {{ _('Dowload reports') }}
{% endblock %}

{% block maincolumn_content %}
  {{ page_header(
       _('Dowload reports'),
       back_link=url_for('main.service_dashboard', service_id=current_service.id)
     ) }}

  <div class="mb-12">
    <p>
      {{ _("Reports expire and are deleted 72 hours after being generated.") }}
    </p>
  </div>

  <div>
    {% call form_wrapper(action=action) %}
    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}" />
    <button type="submit" class="button button-red mt-4" name="generate-report">Generate a report for testing</button>
    {% endcall %}
</div>
  {% set empty_txt = empty_list(_('You havenâ€™t generated reports recently'), _('Check sent notifications or jobs to get started.'), 'emptyFlower', url_for('main.service_dashboard', service_id=current_service.id), _('Go to dashboard')) %}

  {{ ajax_block(partials, updates_url, 'reports', interval=5) }}

{% endblock %}
