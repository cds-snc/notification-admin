{% extends "views/platform-admin/_base_template.html" %}
{% from "components/textbox.html" import textbox %}
{% from "components/checkbox.html" import checkbox %}
{% from "components/page-footer.html" import page_footer %}
{% from "components/big-number.html" import big_number, big_number_with_status %}
{% from "components/message-count-label.html" import message_count_label %}
{% from "components/table.html" import mapping_table, field, stats_fields, row_group, row, right_aligned_field_heading, hidden_field_heading, text_field %}
{% from "components/form.html" import form_wrapper %}


{% block per_page_title %}
  {{ page_title|capitalize }}
{% endblock %}

{% block platform_admin_content %}

  <h1 class="heading-large">
    {{ page_title|capitalize }}
  </h1>

  {% call(item, row_number) mapping_table(
    caption=page_title|capitalize,
    caption_visible=False,
    field_headings=[
    'API Key',
    'Service',
    right_aligned_field_heading('Total Notifications'),
    right_aligned_field_heading('Email'),
    right_aligned_field_heading('SMS')
    ],
    field_headings_visible=True
  ) %}

    {% for x in api_key_list %}

      {% call row_group() %}

        {% call row() %}
          {% call field(border=False) %}
            <a href="{{ url_for('.api_keys', service_id=x['service_id']) }}" class="browse-list-link">{{ x['api_key_name'] }}</a>
          {% endcall %}
          {% call field(border=False) %}
            <a href="{{ url_for('main.service_dashboard', service_id=x['service_id']) }}" class="browse-list-link">{{ x['service_name'] }}</a>
          {% endcall %}
          {% call field(align='right', border=False) %}
            {{ big_number(x['total_notifications'], smallest=True) }}
          {% endcall %}
          {% call field(align='right', border=False) %}
            {{ big_number(x['email_notifications'], smallest=True) }}
          {% endcall %}
          {% call field(align='right', border=False) %}
            {{ big_number(x['sms_notifications'], smallest=True) }}
          {% endcall %}

        {% endcall %}

      {% endcall %}

    {% endfor %}

  {% endcall %}

{% endblock %}
